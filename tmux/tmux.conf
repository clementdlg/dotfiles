#### initialization ####

# setting env
set-option -g default-command "bash --rcfile ~/.bashrc"
set -g default-terminal "tmux-256color"
set -sg terminal-overrides ",*:RGB"
setw -g mouse on
set -g history-limit 10000

#### layout ####

# index start at 1
set -g base-index 1
setw -g pane-base-index 1
set-option -g renumber-windows on


################
### bindings ###
################

# meta
bind r source-file "~/.config/tmux/tmux.conf" \; display-message "Config reloaded!"
bind a new-session

# Bind window numbers to the appropriate keys for an AZERTY layout
unbind 1 ; bind & select-window -t 1
unbind 2 ; bind é select-window -t 2
unbind 3 ; bind '"' select-window -t 3
unbind 4 ; bind "'" select-window -t 4
unbind 5 ; bind ( select-window -t 5
unbind 6 ; bind - select-window -t 6
unbind 7 ; bind è select-window -t 7
unbind 8 ; bind _ select-window -t 8
unbind 9 ; bind ç select-window -t 9

# splits
bind v split-window -h # vertical split
bind b split-window -v # horizontal split

# pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
unbind l
bind l select-pane -R

# resize pane
unbind Left ;	bind Left resize-pane -L 15
unbind Down ;	bind Down resize-pane -D 5
unbind Up ;		bind Up resize-pane -U 5
unbind Right ;	bind Right resize-pane -R 15

#### rice ####
# borders
set-option -g pane-border-style fg=white
# status bar
set-option -g status-position top
set -g status-interval 6
set -g status-fg white # foreground
set -g status-bg '#1c1c2e' # background

# status bar left
set -g status-left '#[bg=#ffa273]#[fg=#1c1c2e]󰝰 #(basename #{pane_current_path})#[bg=#1c1c2e] '
set -g window-status-format '#[bg=#94b6ff]#[fg=#1c1c2e] #W'
set -g window-status-current-format '#[bg=#94b6ff]#[fg=#1c1c2e] #W'

set-option -g window-status-separator ""
set -g status-left-length 25 # reserve space for the directory name







# status bar right
# Enable activity monitoring
set -g monitor-activity on
set -g activity-action current

# Set default status-right
set -g @git-status ""
set -g status-right "#[bg=#94b6ff]#[fg=#1c1c2e]#{@git-status} #(whoami)󰇄 #(hostname) #S"

# Hook to run on activity (e.g., when you change directories)
set-hook -g alert-activity '
  run-shell "
	git -C #{pane_current_path} rev-parse --is-inside-work-tree &> /dev/null
    if [[ $? -eq 0 ]]; then
      tmux set -g @git-status \" #(git -C #{pane_current_path} rev-parse --abbrev-ref HEAD 2>/dev/null)\"
    else
      tmux set -g @git-status \"\"
    fi
  "
'



# if-shell '[ $(git -C "#{pane_current_path}" rev-parse --is-inside-work-tree &> /dev/null; echo $?) -eq 0 ]' \
#     'set -g status-right "yes to git"' \
#     'set -g status-right "no to git"'


	# set -g status-right "#[bg=#94b6ff]#[fg=#1c1c2e] #(git -C #{pane_current_path} rev-parse --abbrev-ref HEAD 2>/dev/null) #(whoami)󰇄 #(hostname) #S" \
	# set -g status-right "#[bg=#94b6ff]#[fg=#1c1c2e] #(whoami)󰇄 #(hostname) #S"
# set -g status-right '#(~/.config/bash/bash_tmux.sh tmuxStatus "#{pane_current_path}" "#S")'







